(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([["app-service"],{"0de9":function(t,i,s){"use strict";function e(t){var i=Object.prototype.toString.call(t);return i.substring(8,i.length-1)}function a(){return"string"===typeof __channelId__&&__channelId__}function n(t){for(var i=arguments.length,s=new Array(i>1?i-1:0),e=1;e<i;e++)s[e-1]=arguments[e];console[t].apply(console,s)}function r(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];var n=i.shift();if(a())return i.push(i.pop().replace("at ","uni-app:///")),console[n].apply(console,i);var r=i.map((function(t){var i=Object.prototype.toString.call(t).toLowerCase();if("[object object]"===i||"[object array]"===i)try{t="---BEGIN:JSON---"+JSON.stringify(t)+"---END:JSON---"}catch(a){t="[object object]"}else if(null===t)t="---NULL---";else if(void 0===t)t="---UNDEFINED---";else{var s=e(t).toUpperCase();t="NUMBER"===s||"BOOLEAN"===s?"---BEGIN:"+s+"---"+t+"---END:"+s+"---":String(t)}return t})),c="";if(r.length>1){var l=r.pop();c=r.join("---COMMA---"),0===l.indexOf(" at ")?c+=l:c+="---COMMA---"+l}else c=r[0];console[n](c)}s.r(i),s.d(i,"log",(function(){return n})),s.d(i,"default",(function(){return r}))},"1a91":function(t,i,s){"use strict";s("295f");var e=n(s("8bbf")),a=n(s("f64d"));function n(t){return t&&t.__esModule?t:{default:t}}function r(t,i){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);i&&(e=e.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),s.push.apply(s,e)}return s}function c(t){for(var i=1;i<arguments.length;i++){var s=null!=arguments[i]?arguments[i]:{};i%2?r(Object(s),!0).forEach((function(i){l(t,i,s[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(s,i))}))}return t}function l(t,i,s){return i in t?Object.defineProperty(t,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[i]=s,t}e.default.config.productionTip=!1,a.default.mpType="app";var o=new e.default(c({},a.default));o.$mount()},"209b":function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e={onLaunch:function(){},onShow:function(){},onHide:function(){}};i.default=e},"25e2":function(t,i,s){"use strict";s.r(i);var e=s("209b"),a=s.n(e);for(var n in e)"default"!==n&&function(t){s.d(i,t,(function(){return e[t]}))}(n);i["default"]=a.a},"295f":function(t,i,s){"undefined"===typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(t){var i=this.constructor;return this.then((function(s){return i.resolve(t()).then((function(){return s}))}),(function(s){return i.resolve(t()).then((function(){throw s}))}))}),uni.restoreGlobal&&uni.restoreGlobal(weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),__definePage("pages/HM-chat/HM-chat",(function(){return Vue.extend(s("be16").default)}))},"420c":function(t,i,s){"use strict";var e,a=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("view",[s("view",{staticClass:t._$s(1,"sc","content"),attrs:{_i:1},on:{touchstart:t.hideDrawer}},[s("scroll-view",{staticClass:t._$s(2,"sc","msg-list"),attrs:{"scroll-with-animation":t._$s(2,"a-scroll-with-animation",t.scrollAnimation),"scroll-top":t._$s(2,"a-scroll-top",t.scrollTop),"scroll-into-view":t._$s(2,"a-scroll-into-view",t.scrollToView),_i:2},on:{scrolltoupper:t.loadHistory}},[s("view",{staticClass:t._$s(3,"sc","loading"),attrs:{_i:3}},[s("view",{staticClass:t._$s(4,"sc","spinner"),attrs:{_i:4}},[s("view",{staticClass:t._$s(5,"sc","rect1"),attrs:{_i:5}}),s("view",{staticClass:t._$s(6,"sc","rect2"),attrs:{_i:6}}),s("view",{staticClass:t._$s(7,"sc","rect3"),attrs:{_i:7}}),s("view",{staticClass:t._$s(8,"sc","rect4"),attrs:{_i:8}}),s("view",{staticClass:t._$s(9,"sc","rect5"),attrs:{_i:9}})])]),t._l(t._$s(10,"f",{forItems:t.msgList}),(function(i,e,a,n){return s("view",{key:t._$s(10,"f",{forIndex:a,key:e}),staticClass:t._$s("10-"+n,"sc","row"),attrs:{id:t._$s("10-"+n,"a-id","msg"+i.msg.id),_i:"10-"+n}},[t._$s("11-"+n,"i","system"==i.type)?[s("view",{staticClass:t._$s("12-"+n,"sc","system"),attrs:{_i:"12-"+n}},[t._$s("13-"+n,"i","text"==i.msg.type)?s("view",{staticClass:t._$s("13-"+n,"sc","text"),attrs:{_i:"13-"+n}},[t._v(t._$s("13-"+n,"t0-0",t._s(i.msg.content.text)))]):t._e()])]:t._e(),t._$s("14-"+n,"i","user"==i.type)?[t._$s("15-"+n,"i",i.msg.userinfo.uid==t.myuid)?s("view",{staticClass:t._$s("15-"+n,"sc","my"),attrs:{_i:"15-"+n}},[s("view",{staticClass:t._$s("16-"+n,"sc","left"),attrs:{_i:"16-"+n}},[t._$s("17-"+n,"i","text"==i.msg.type)?s("view",{staticClass:t._$s("17-"+n,"sc","bubble"),attrs:{_i:"17-"+n}},[s("rich-text",{attrs:{nodes:t._$s("18-"+n,"a-nodes",i.msg.content.text),_i:"18-"+n}})]):t._e(),t._$s("19-"+n,"i","voice"==i.msg.type)?s("view",{staticClass:t._$s("19-"+n,"sc","bubble voice"),class:t._$s("19-"+n,"c",t.playMsgid==i.msg.id?"play":""),attrs:{_i:"19-"+n},on:{click:function(s){return t.playVoice(i.msg)}}},[s("view",{staticClass:t._$s("20-"+n,"sc","length"),attrs:{_i:"20-"+n}},[t._v(t._$s("20-"+n,"t0-0",t._s(i.msg.content.length)))]),s("view",{staticClass:t._$s("21-"+n,"sc","icon my-voice"),attrs:{_i:"21-"+n}})]):t._e(),t._$s("22-"+n,"i","img"==i.msg.type)?s("view",{staticClass:t._$s("22-"+n,"sc","bubble img"),attrs:{_i:"22-"+n},on:{click:function(s){return t.showPic(i.msg)}}},[s("image",{style:t._$s("23-"+n,"s",{width:i.msg.content.w+"px",height:i.msg.content.h+"px"}),attrs:{src:t._$s("23-"+n,"a-src",i.msg.content.url),_i:"23-"+n}})]):t._e()]),s("view",{staticClass:t._$s("24-"+n,"sc","right"),attrs:{_i:"24-"+n}},[s("image",{attrs:{src:t._$s("25-"+n,"a-src",i.msg.userinfo.face),_i:"25-"+n}})])]):t._e(),t._$s("26-"+n,"i",i.msg.userinfo.uid!=t.myuid)?s("view",{staticClass:t._$s("26-"+n,"sc","other"),attrs:{_i:"26-"+n}},[s("view",{staticClass:t._$s("27-"+n,"sc","left"),attrs:{_i:"27-"+n}},[s("image",{attrs:{src:t._$s("28-"+n,"a-src",i.msg.userinfo.face),_i:"28-"+n}})]),s("view",{staticClass:t._$s("29-"+n,"sc","right"),attrs:{_i:"29-"+n}},[s("view",{staticClass:t._$s("30-"+n,"sc","username"),attrs:{_i:"30-"+n}},[s("view",{staticClass:t._$s("31-"+n,"sc","name"),attrs:{_i:"31-"+n}},[t._v(t._$s("31-"+n,"t0-0",t._s(i.msg.userinfo.username)))]),s("view",{staticClass:t._$s("32-"+n,"sc","time"),attrs:{_i:"32-"+n}},[t._v(t._$s("32-"+n,"t0-0",t._s(i.msg.time)))])]),t._$s("33-"+n,"i","text"==i.msg.type)?s("view",{staticClass:t._$s("33-"+n,"sc","bubble"),attrs:{_i:"33-"+n}},[s("rich-text",{attrs:{nodes:t._$s("34-"+n,"a-nodes",i.msg.content.text),_i:"34-"+n}})]):t._e(),t._$s("35-"+n,"i","voice"==i.msg.type)?s("view",{staticClass:t._$s("35-"+n,"sc","bubble voice"),class:t._$s("35-"+n,"c",t.playMsgid==i.msg.id?"play":""),attrs:{_i:"35-"+n},on:{click:function(s){return t.playVoice(i.msg)}}},[s("view",{staticClass:t._$s("36-"+n,"sc","icon other-voice"),attrs:{_i:"36-"+n}}),s("view",{staticClass:t._$s("37-"+n,"sc","length"),attrs:{_i:"37-"+n}},[t._v(t._$s("37-"+n,"t0-0",t._s(i.msg.content.length)))])]):t._e(),t._$s("38-"+n,"i","img"==i.msg.type)?s("view",{staticClass:t._$s("38-"+n,"sc","bubble img"),attrs:{_i:"38-"+n},on:{click:function(s){return t.showPic(i.msg)}}},[s("image",{style:t._$s("39-"+n,"s",{width:i.msg.content.w+"px",height:i.msg.content.h+"px"}),attrs:{src:t._$s("39-"+n,"a-src",i.msg.content.url),_i:"39-"+n}})]):t._e()])]):t._e()]:t._e()],2)}))],2)]),s("view",{staticClass:t._$s(40,"sc","popup-layer"),class:t._$s(40,"c",t.popupLayerClass),attrs:{_i:40},on:{touchmove:function(i){return i.stopPropagation(),i.preventDefault(),t.discard(i)}}},[s("swiper",{staticClass:t._$s(41,"sc","emoji-swiper"),class:t._$s(41,"c",{hidden:t.hideEmoji}),attrs:{_i:41}},t._l(t._$s(42,"f",{forItems:t.emojiList}),(function(i,e,a,n){return s("swiper-item",{key:t._$s(42,"f",{forIndex:a,key:e})},t._l(t._$s("43-"+n,"f",{forItems:i}),(function(i,e,a,r){return s("view",{key:t._$s("43-"+n,"f",{forIndex:a,key:e}),attrs:{_i:"43-"+n+"-"+r},on:{click:function(s){return t.addEmoji(i)}}},[s("image",{attrs:{src:t._$s("44-"+n+"-"+r,"a-src","/static/img/emoji/"+i.url),_i:"44-"+n+"-"+r}})])})),0)})),0),s("view",{staticClass:t._$s(45,"sc","more-layer"),class:t._$s(45,"c",{hidden:t.hideMore}),attrs:{_i:45}},[s("view",{staticClass:t._$s(46,"sc","list"),attrs:{_i:46}},[s("view",{staticClass:t._$s(47,"sc","box"),attrs:{_i:47},on:{click:t.chooseImage}},[s("view",{staticClass:t._$s(48,"sc","icon tupian2"),attrs:{_i:48}})]),s("view",{staticClass:t._$s(49,"sc","box"),attrs:{_i:49},on:{click:t.camera}},[s("view",{staticClass:t._$s(50,"sc","icon paizhao"),attrs:{_i:50}})])])])]),s("view",{staticClass:t._$s(51,"sc","input-box"),class:t._$s(51,"c",t.popupLayerClass),attrs:{_i:51},on:{touchmove:function(i){return i.stopPropagation(),i.preventDefault(),t.discard(i)}}},[s("view",{staticClass:t._$s(52,"sc","voice"),attrs:{_i:52}},[s("view",{staticClass:t._$s(53,"sc","icon"),class:t._$s(53,"c",t.isVoice?"jianpan":"yuyin"),attrs:{_i:53},on:{click:t.switchVoice}})]),s("view",{staticClass:t._$s(54,"sc","textbox"),attrs:{_i:54}},[s("view",{staticClass:t._$s(55,"sc","voice-mode"),class:t._$s(55,"c",[t.isVoice?"":"hidden",t.recording?"recording":""]),attrs:{_i:55},on:{touchstart:t.voiceBegin,touchmove:function(i){return i.stopPropagation(),i.preventDefault(),t.voiceIng(i)},touchend:t.voiceEnd,touchcancel:t.voiceCancel}},[t._v(t._$s(55,"t0-0",t._s(t.voiceTis)))]),s("view",{staticClass:t._$s(56,"sc","text-mode"),class:t._$s(56,"c",t.isVoice?"hidden":""),attrs:{_i:56}},[s("view",{staticClass:t._$s(57,"sc","box"),attrs:{_i:57}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textMsg,expression:"textMsg"}],attrs:{_i:58},domProps:{value:t._$s(58,"v-model",t.textMsg)},on:{focus:t.textareaFocus,input:function(i){i.target.composing||(t.textMsg=i.target.value)}}})]),s("view",{staticClass:t._$s(59,"sc","em"),attrs:{_i:59},on:{click:t.chooseEmoji}},[s("view",{staticClass:t._$s(60,"sc","icon biaoqing"),attrs:{_i:60}})])])]),s("view",{staticClass:t._$s(61,"sc","more"),attrs:{_i:61},on:{click:t.showMore}},[s("view",{staticClass:t._$s(62,"sc","icon add"),attrs:{_i:62}})]),s("view",{staticClass:t._$s(63,"sc","send"),class:t._$s(63,"c",t.isVoice?"hidden":""),attrs:{_i:63},on:{click:t.sendText}},[s("view",{staticClass:t._$s(64,"sc","btn"),attrs:{_i:64}})])]),s("view",{staticClass:t._$s(65,"sc","record"),class:t._$s(65,"c",t.recording?"":"hidden"),attrs:{_i:65}},[s("view",{staticClass:t._$s(66,"sc","ing"),class:t._$s(66,"c",t.willStop?"hidden":""),attrs:{_i:66}},[s("view",{staticClass:t._$s(67,"sc","icon luyin2"),attrs:{_i:67}})]),s("view",{staticClass:t._$s(68,"sc","cancel"),class:t._$s(68,"c",t.willStop?"":"hidden"),attrs:{_i:68}},[s("view",{staticClass:t._$s(69,"sc","icon chehui"),attrs:{_i:69}})]),s("view",{staticClass:t._$s(70,"sc","tis"),class:t._$s(70,"c",t.willStop?"change":""),attrs:{_i:70}},[t._v(t._$s(70,"t0-0",t._s(t.recordTis)))])])])},n=[];s.d(i,"b",(function(){return a})),s.d(i,"c",(function(){return n})),s.d(i,"a",(function(){return e}))},"69d9":function(t,i,s){"use strict";s.r(i);var e=s("79a7"),a=s.n(e);for(var n in e)"default"!==n&&function(t){s.d(i,t,(function(){return e[t]}))}(n);i["default"]=a.a},"79a7":function(t,i,s){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s={data:function(){return{textMsg:"",isHistoryLoading:!1,scrollAnimation:!1,scrollTop:0,scrollToView:"",msgList:[],msgImgList:[],myuid:0,RECORDER:uni.getRecorderManager(),isVoice:!1,voiceTis:"\u6309\u4f4f \u8bf4\u8bdd",recordTis:"\u624b\u6307\u4e0a\u6ed1 \u53d6\u6d88\u53d1\u9001",recording:!1,willStop:!1,initPoint:{identifier:0,Y:0},recordTimer:null,recordLength:1,AUDIO:uni.createInnerAudioContext(),playMsgid:null,VoiceTimer:null,popupLayerClass:"",hideMore:!0,hideEmoji:!0,emojiList:[[{url:"100.gif",alt:"[\u5fae\u7b11]"},{url:"101.gif",alt:"[\u4f24\u5fc3]"},{url:"102.gif",alt:"[\u7f8e\u5973]"},{url:"103.gif",alt:"[\u53d1\u5446]"},{url:"104.gif",alt:"[\u58a8\u955c]"},{url:"105.gif",alt:"[\u54ed]"},{url:"106.gif",alt:"[\u7f9e]"},{url:"107.gif",alt:"[\u54d1]"},{url:"108.gif",alt:"[\u7761]"},{url:"109.gif",alt:"[\u54ed]"},{url:"110.gif",alt:"[\u56e7]"},{url:"111.gif",alt:"[\u6012]"},{url:"112.gif",alt:"[\u8c03\u76ae]"},{url:"113.gif",alt:"[\u7b11]"},{url:"114.gif",alt:"[\u60ca\u8bb6]"},{url:"115.gif",alt:"[\u96be\u8fc7]"},{url:"116.gif",alt:"[\u9177]"},{url:"117.gif",alt:"[\u6c57]"},{url:"118.gif",alt:"[\u6293\u72c2]"},{url:"119.gif",alt:"[\u5410]"},{url:"120.gif",alt:"[\u7b11]"},{url:"121.gif",alt:"[\u5feb\u4e50]"},{url:"122.gif",alt:"[\u5947]"},{url:"123.gif",alt:"[\u50b2]"}],[{url:"124.gif",alt:"[\u997f]"},{url:"125.gif",alt:"[\u7d2f]"},{url:"126.gif",alt:"[\u5413]"},{url:"127.gif",alt:"[\u6c57]"},{url:"128.gif",alt:"[\u9ad8\u5174]"},{url:"129.gif",alt:"[\u95f2]"},{url:"130.gif",alt:"[\u52aa\u529b]"},{url:"131.gif",alt:"[\u9a82]"},{url:"132.gif",alt:"[\u7591\u95ee]"},{url:"133.gif",alt:"[\u79d8\u5bc6]"},{url:"134.gif",alt:"[\u4e71]"},{url:"135.gif",alt:"[\u75af]"},{url:"136.gif",alt:"[\u54c0]"},{url:"137.gif",alt:"[\u9b3c]"},{url:"138.gif",alt:"[\u6253\u51fb]"},{url:"139.gif",alt:"[bye]"},{url:"140.gif",alt:"[\u6c57]"},{url:"141.gif",alt:"[\u62a0]"},{url:"142.gif",alt:"[\u9f13\u638c]"},{url:"143.gif",alt:"[\u7cdf\u7cd5]"},{url:"144.gif",alt:"[\u6076\u641e]"},{url:"145.gif",alt:"[\u4ec0\u4e48]"},{url:"146.gif",alt:"[\u4ec0\u4e48]"},{url:"147.gif",alt:"[\u7d2f]"}],[{url:"148.gif",alt:"[\u770b]"},{url:"149.gif",alt:"[\u96be\u8fc7]"},{url:"150.gif",alt:"[\u96be\u8fc7]"},{url:"151.gif",alt:"[\u574f]"},{url:"152.gif",alt:"[\u4eb2]"},{url:"153.gif",alt:"[\u5413]"},{url:"154.gif",alt:"[\u53ef\u601c]"},{url:"155.gif",alt:"[\u5200]"},{url:"156.gif",alt:"[\u6c34\u679c]"},{url:"157.gif",alt:"[\u9152]"},{url:"158.gif",alt:"[\u7bee\u7403]"},{url:"159.gif",alt:"[\u4e52\u4e53]"},{url:"160.gif",alt:"[\u5496\u5561]"},{url:"161.gif",alt:"[\u7f8e\u98df]"},{url:"162.gif",alt:"[\u52a8\u7269]"},{url:"163.gif",alt:"[\u9c9c\u82b1]"},{url:"164.gif",alt:"[\u67af]"},{url:"165.gif",alt:"[\u5507]"},{url:"166.gif",alt:"[\u7231]"},{url:"167.gif",alt:"[\u5206\u624b]"},{url:"168.gif",alt:"[\u751f\u65e5]"},{url:"169.gif",alt:"[\u7535]"},{url:"170.gif",alt:"[\u70b8\u5f39]"},{url:"171.gif",alt:"[\u5200\u5b50]"}],[{url:"172.gif",alt:"[\u8db3\u7403]"},{url:"173.gif",alt:"[\u74e2\u866b]"},{url:"174.gif",alt:"[\u7fd4]"},{url:"175.gif",alt:"[\u6708\u4eae]"},{url:"176.gif",alt:"[\u592a\u9633]"},{url:"177.gif",alt:"[\u793c\u7269]"},{url:"178.gif",alt:"[\u62b1\u62b1]"},{url:"179.gif",alt:"[\u62c7\u6307]"},{url:"180.gif",alt:"[\u8d2c\u4f4e]"},{url:"181.gif",alt:"[\u63e1\u624b]"},{url:"182.gif",alt:"[\u526a\u5200\u624b]"},{url:"183.gif",alt:"[\u62b1\u62f3]"},{url:"184.gif",alt:"[\u52fe\u5f15]"},{url:"185.gif",alt:"[\u62f3\u5934]"},{url:"186.gif",alt:"[\u5c0f\u62c7\u6307]"},{url:"187.gif",alt:"[\u62c7\u6307\u516b]"},{url:"188.gif",alt:"[\u98df\u6307]"},{url:"189.gif",alt:"[ok]"},{url:"190.gif",alt:"[\u60c5\u4fa3]"},{url:"191.gif",alt:"[\u7231\u5fc3]"},{url:"192.gif",alt:"[\u8e66\u54d2]"},{url:"193.gif",alt:"[\u98a4\u6296]"},{url:"194.gif",alt:"[\u6004\u6c14]"},{url:"195.gif",alt:"[\u8df3\u821e]"}],[{url:"196.gif",alt:"[\u53d1\u5446]"},{url:"197.gif",alt:"[\u80cc\u7740]"},{url:"198.gif",alt:"[\u4f38\u624b]"},{url:"199.gif",alt:"[\u800d\u5e05]"},{url:"200.png",alt:"[\u5fae\u7b11]"},{url:"201.png",alt:"[\u751f\u75c5]"},{url:"202.png",alt:"[\u54ed\u6ce3]"},{url:"203.png",alt:"[\u5410\u820c]"},{url:"204.png",alt:"[\u8ff7\u7cca]"},{url:"205.png",alt:"[\u77aa\u773c]"},{url:"206.png",alt:"[\u6050\u6016]"},{url:"207.png",alt:"[\u5fe7\u6101]"},{url:"208.png",alt:"[\u7728\u7709]"},{url:"209.png",alt:"[\u95ed\u773c]"},{url:"210.png",alt:"[\u9119\u89c6]"},{url:"211.png",alt:"[\u9634\u6697]"},{url:"212.png",alt:"[\u5c0f\u9b3c]"},{url:"213.png",alt:"[\u793c\u7269]"},{url:"214.png",alt:"[\u62dc\u4f5b]"},{url:"215.png",alt:"[\u529b\u91cf]"},{url:"216.png",alt:"[\u91d1\u94b1]"},{url:"217.png",alt:"[\u86cb\u7cd5]"},{url:"218.png",alt:"[\u5f69\u5e26]"},{url:"219.png",alt:"[\u793c\u7269]"}]],onlineEmoji:{"100.gif":"AbNQgA.gif","101.gif":"AbN3ut.gif","102.gif":"AbNM3d.gif","103.gif":"AbN8DP.gif","104.gif":"AbNljI.gif","105.gif":"AbNtUS.gif","106.gif":"AbNGHf.gif","107.gif":"AbNYE8.gif","108.gif":"AbNaCQ.gif","109.gif":"AbNN4g.gif","110.gif":"AbN0vn.gif","111.gif":"AbNd3j.gif","112.gif":"AbNsbV.gif","113.gif":"AbNwgs.gif","114.gif":"AbNrD0.gif","115.gif":"AbNDuq.gif","116.gif":"AbNg5F.gif","117.gif":"AbN6ET.gif","118.gif":"AbNcUU.gif","119.gif":"AbNRC4.gif","120.gif":"AbNhvR.gif","121.gif":"AbNf29.gif","122.gif":"AbNW8J.gif","123.gif":"AbNob6.gif","124.gif":"AbN5K1.gif","125.gif":"AbNHUO.gif","126.gif":"AbNIDx.gif","127.gif":"AbN7VK.gif","128.gif":"AbNb5D.gif","129.gif":"AbNX2d.gif","130.gif":"AbNLPe.gif","131.gif":"AbNjxA.gif","132.gif":"AbNO8H.gif","133.gif":"AbNxKI.gif","134.gif":"AbNzrt.gif","135.gif":"AbU9Vf.gif","136.gif":"AbUSqP.gif","137.gif":"AbUCa8.gif","138.gif":"AbUkGQ.gif","139.gif":"AbUFPg.gif","140.gif":"AbUPIS.gif","141.gif":"AbUZMn.gif","142.gif":"AbUExs.gif","143.gif":"AbUA2j.gif","144.gif":"AbUMIU.gif","145.gif":"AbUerq.gif","146.gif":"AbUKaT.gif","147.gif":"AbUmq0.gif","148.gif":"AbUuZV.gif","149.gif":"AbUliF.gif","150.gif":"AbU1G4.gif","151.gif":"AbU8z9.gif","152.gif":"AbU3RJ.gif","153.gif":"AbUYs1.gif","154.gif":"AbUJMR.gif","155.gif":"AbUadK.gif","156.gif":"AbUtqx.gif","157.gif":"AbUUZ6.gif","158.gif":"AbUBJe.gif","159.gif":"AbUdIO.gif","160.gif":"AbU0iD.gif","161.gif":"AbUrzd.gif","162.gif":"AbUDRH.gif","163.gif":"AbUyQA.gif","164.gif":"AbUWo8.gif","165.gif":"AbU6sI.gif","166.gif":"AbU2eP.gif","167.gif":"AbUcLt.gif","168.gif":"AbU4Jg.gif","169.gif":"AbURdf.gif","170.gif":"AbUhFS.gif","171.gif":"AbU5WQ.gif","172.gif":"AbULwV.gif","173.gif":"AbUIzj.gif","174.gif":"AbUTQs.gif","175.gif":"AbU7yn.gif","176.gif":"AbUqe0.gif","177.gif":"AbUHLq.gif","178.gif":"AbUOoT.gif","179.gif":"AbUvYF.gif","180.gif":"AbUjFU.gif","181.gif":"AbaSSJ.gif","182.gif":"AbUxW4.gif","183.gif":"AbaCO1.gif","184.gif":"Abapl9.gif","185.gif":"Aba9yR.gif","186.gif":"AbaFw6.gif","187.gif":"Abaiex.gif","188.gif":"AbakTK.gif","189.gif":"AbaZfe.png","190.gif":"AbaEFO.gif","191.gif":"AbaVYD.gif","192.gif":"AbamSH.gif","193.gif":"AbaKOI.gif","194.gif":"Abanld.gif","195.gif":"Abau6A.gif","196.gif":"AbaQmt.gif","197.gif":"Abal0P.gif","198.gif":"AbatpQ.gif","199.gif":"Aba1Tf.gif","200.png":"Aba8k8.png","201.png":"AbaGtS.png","202.png":"AbaJfg.png","203.png":"AbaNlj.png","204.png":"Abawmq.png","205.png":"AbaU6s.png","206.png":"AbaaXn.png","207.png":"Aba000.png","208.png":"AbarkT.png","209.png":"AbastU.png","210.png":"AbaB7V.png","211.png":"Abafn1.png","212.png":"Abacp4.png","213.png":"AbayhF.png","214.png":"Abag1J.png","215.png":"Aba2c9.png","216.png":"AbaRXR.png","217.png":"Aba476.png","218.png":"Abah0x.png","219.png":"Abdg58.png"}}},onLoad:function(i){var s=this;uni.connectSocket({url:"ws://49.235.104.224:8081"}),uni.onSocketOpen((function(i){t("log","WebSocket\u8fde\u63a5\u5df2\u6253\u5f00\uff01"," at pages/HM-chat/HM-chat.vue:205")})),uni.onSocketMessage((function(i){t("log","\u6536\u5230\u670d\u52a1\u5668\u5185\u5bb9\uff1a"+i.data," at pages/HM-chat/HM-chat.vue:208"),JSON.parse(i.data).myuid!=s.myuid&&s.screenMsg(JSON.parse(i.data))})),uni.onSocketClose((function(i){t("log","WebSocket \u5df2\u5173\u95ed\uff01"," at pages/HM-chat/HM-chat.vue:214")})),this.getMsgList(),this.AUDIO.onEnded((function(t){s.playMsgid=null})),this.RECORDER.onStart((function(t){s.recordBegin(t)})),this.RECORDER.onStop((function(t){s.recordEnd(t)}))},onShow:function(){this.scrollTop=999999999},methods:{screenMsg:function(i){if(t("log",i," at pages/HM-chat/HM-chat.vue:239"),t("log","\u6b63\u5728\u6e32\u67d3"," at pages/HM-chat/HM-chat.vue:240"),"system"==i.type)switch(i.msg.type){case"text":this.addSystemTextMsg(i);break;case"redEnvelope":this.addSystemRedEnvelopeMsg(i);break}else if("user"==i.type){switch(i.msg.type){case"text":this.addTextMsg(i);break;case"voice":this.addVoiceMsg(i);break;case"img":this.addImgMsg(i);break;case"redEnvelope":this.addRedEnvelopeMsg(i);break}i.msg.userinfo.uid!=this.myuid&&(t("log","\u632f\u52a8"," at pages/HM-chat/HM-chat.vue:271"),uni.vibrateLong())}this.$nextTick((function(){this.scrollToView="msg"+i.msg.id}))},loadHistory:function(t){if(!this.isHistoryLoading){this.isHistoryLoading=!0,this.scrollAnimation=!1;this.msgList[0].msg.id}},getMsgList:function(){for(var t=[{type:"system",msg:{id:0,type:"text",content:{text:"\u6211\u4eec\u7684\u79c1\u4eba\u804a\u5929\u5ba4"}}}],i=0;i<t.length;i++)"user"==t[i].type&&"img"==t[i].msg.type&&(t[i].msg.content=this.setPicSize(t[i].msg.content),this.msgImgList.push(t[i].msg.content.url));this.msgList=t,this.$nextTick((function(){this.scrollTop=9999,this.$nextTick((function(){this.scrollAnimation=!0}))}))},setPicSize:function(t){var i=uni.upx2px(350),s=uni.upx2px(350);if(t.w>i||t.h>s){var e=t.w/t.h;t.w=e>1?i:s*e,t.h=e>1?i/e:s}return t},showMore:function(){this.isVoice=!1,this.hideEmoji=!0,this.hideMore?(this.hideMore=!1,this.openDrawer()):this.hideDrawer()},openDrawer:function(){this.popupLayerClass="showLayer"},hideDrawer:function(){var t=this;this.popupLayerClass="",setTimeout((function(){t.hideMore=!0,t.hideEmoji=!0}),150)},chooseImage:function(){this.getImage("album")},camera:function(){this.getImage("camera")},getImage:function(i){var s=this;this.hideDrawer(),uni.chooseImage({sourceType:[i],sizeType:["original","compressed"],success:function(i){for(var e=function(e){uni.getImageInfo({src:i.tempFilePaths[e],success:function(a){t("log","\u9009\u62e9\u56fe\u7247"," at pages/HM-chat/HM-chat.vue:399"),uni.uploadFile({url:"http://49.235.104.224:8082/upup",filePath:i.tempFilePaths[e],success:function(i){t("log","\u4e0a\u4f20\u56fe\u7247"," at pages/HM-chat/HM-chat.vue:405");var e={url:JSON.parse(i.data).url,w:a.width,h:a.height};s.sendMsg(e,"img")}})}})},a=0;a<i.tempFilePaths.length;a++)e(a)}})},chooseEmoji:function(){this.hideMore=!0,this.hideEmoji?(this.hideEmoji=!1,this.openDrawer()):this.hideDrawer()},addEmoji:function(t){this.textMsg+=t.alt},textareaFocus:function(){"showLayer"==this.popupLayerClass&&0==this.hideMore&&this.hideDrawer()},sendText:function(){if(this.hideDrawer(),this.textMsg){var t=this.replaceEmoji(this.textMsg),i={text:t};this.sendMsg(i,"text"),this.textMsg=""}},replaceEmoji:function(t){var i=this,s=t.replace(/\[([^(\]|\[)]*)\]/g,(function(t,s){for(var e=0;e<i.emojiList.length;e++)for(var a=i.emojiList[e],n=0;n<a.length;n++){var r=a[n];if(r.alt==t){var c="http://49.235.104.224:8082/uploads/emoji/",l='<img style="vertical-align:middle;" src="'+c+r.url+'">';return l}}}));return'<div style="line-height:25px">'+s+"</div>"},sendMsg:function(i,s){var e=new Date,a=this.msgList[this.msgList.length-1].msg.id;a++;var n={type:"user",myuid:this.myuid,msg:{id:a,time:e.getHours()+":"+e.getMinutes(),type:s,userinfo:{uid:this.myuid,username:"\u8001\u516c",face:"/static/img/boy.jpg"},content:i}};t("log","\u53d1\u9001\u7684\u6d88\u606f",n," at pages/HM-chat/HM-chat.vue:478"),uni.sendSocketMessage({data:JSON.stringify(n)}),this.screenMsg(n)},addTextMsg:function(t){this.msgList.push(t)},addVoiceMsg:function(t){this.msgList.push(t)},addImgMsg:function(t){t.msg.content=this.setPicSize(t.msg.content),this.msgImgList.push(t.msg.content.url),this.msgList.push(t)},addSystemTextMsg:function(t){this.msgList.push(t)},showPic:function(t){uni.previewImage({indicator:"none",current:t.content.url,urls:this.msgImgList})},playVoice:function(t){this.playMsgid=t.id,this.AUDIO.src=t.content.url,this.$nextTick((function(){this.AUDIO.play()}))},voiceBegin:function(t){t.touches.length>1||(this.initPoint.Y=t.touches[0].clientY,this.initPoint.identifier=t.touches[0].identifier,this.RECORDER.start({format:"mp3"}))},recordBegin:function(t){var i=this;this.recording=!0,this.voiceTis="\u677e\u5f00 \u7ed3\u675f",this.recordLength=0,this.recordTimer=setInterval((function(){i.recordLength++}),1e3)},voiceCancel:function(){this.recording=!1,this.voiceTis="\u6309\u4f4f \u8bf4\u8bdd",this.recordTis="\u624b\u6307\u4e0a\u6ed1 \u53d6\u6d88\u53d1\u9001",this.willStop=!0,this.RECORDER.stop()},voiceIng:function(t){if(this.recording){var i=t.touches[0];this.initPoint.Y-i.clientY>=uni.upx2px(100)?(this.willStop=!0,this.recordTis="\u677e\u5f00\u624b\u6307 \u53d6\u6d88\u53d1\u9001"):(this.willStop=!1,this.recordTis="\u624b\u6307\u4e0a\u6ed1 \u53d6\u6d88\u53d1\u9001")}},voiceEnd:function(t){this.recording&&(this.recording=!1,this.voiceTis="\u6309\u4f4f \u8bf4\u8bdd",this.recordTis="\u624b\u6307\u4e0a\u6ed1 \u53d6\u6d88\u53d1\u9001",this.RECORDER.stop())},recordEnd:function(i){var s=this;clearInterval(this.recordTimer),this.willStop?t("log","\u53d6\u6d88\u53d1\u9001\u5f55\u97f3"," at pages/HM-chat/HM-chat.vue:593"):uni.uploadFile({url:"http://49.235.104.224:8082/upup",filePath:i.tempFilePath,success:function(t){var i={length:0,url:JSON.parse(t.data).url},e=parseInt(s.recordLength/60),a=s.recordLength%60;e=e<10?"0"+e:e,a=a<10?"0"+a:a,i.length=e+":"+a,s.sendMsg(i,"voice")}}),this.willStop=!1},switchVoice:function(){this.hideDrawer(),this.isVoice=!this.isVoice},discard:function(){}}};i.default=s}).call(this,s("0de9")["default"])},"8bbf":function(t,i){t.exports=Vue},be16:function(t,i,s){"use strict";s.r(i);var e=s("420c"),a=s("69d9");for(var n in a)"default"!==n&&function(t){s.d(i,t,(function(){return a[t]}))}(n);var r,c=s("f0c5"),l=Object(c["a"])(a["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],r);i["default"]=l.exports},f0c5:function(t,i,s){"use strict";function e(t,i,s,e,a,n,r,c,l,o){var g,f="function"===typeof t?t.options:t;if(l){f.components||(f.components={});var u=Object.prototype.hasOwnProperty;for(var p in l)u.call(l,p)&&!u.call(f.components,p)&&(f.components[p]=l[p])}if(o&&((o.beforeCreate||(o.beforeCreate=[])).unshift((function(){this[o.__module]=this})),(f.mixins||(f.mixins=[])).push(o)),i&&(f.render=i,f.staticRenderFns=s,f._compiled=!0),e&&(f.functional=!0),n&&(f._scopeId="data-v-"+n),r?(g=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},f._ssrRegister=g):a&&(g=c?function(){a.call(this,this.$root.$options.shadowRoot)}:a),g)if(f.functional){f._injectStyles=g;var h=f.render;f.render=function(t,i){return g.call(i),h(t,i)}}else{var d=f.beforeCreate;f.beforeCreate=d?[].concat(d,g):[g]}return{exports:t,options:f}}s.d(i,"a",(function(){return e}))},f64d:function(t,i,s){"use strict";s.r(i);var e=s("25e2");for(var a in e)"default"!==a&&function(t){s.d(i,t,(function(){return e[t]}))}(a);var n,r,c,l,o=s("f0c5"),g=Object(o["a"])(e["default"],n,r,!1,null,null,null,!1,c,l);i["default"]=g.exports}},[["1a91","app-config"]]]);